---
layout: base
---

{% include nav.html %}

<!-- Reading Progress Bar -->
<div class="reading-progress" x-data="{
  progress: 0,
  _scrollHandler: null,

  init() {
    this._scrollHandler = () => {
      requestAnimationFrame(() => this.updateProgress());
    };
    window.addEventListener('scroll', this._scrollHandler, { passive: true });
    this.updateProgress();
  },

  destroy() {
    if (this._scrollHandler) {
      window.removeEventListener('scroll', this._scrollHandler);
    }
  },

  updateProgress() {
    const article = document.querySelector('.post-content');
    if (!article) return;

    const rect = article.getBoundingClientRect();
    const articleTop = rect.top + window.scrollY;
    const articleHeight = rect.height;
    if (articleHeight <= 0) return;

    const windowHeight = window.innerHeight;
    const scrolled = window.scrollY - articleTop + windowHeight * 0.3;
    this.progress = Math.min(100, Math.max(0, (scrolled / articleHeight) * 100));
  }
}">
  <div class="reading-progress-bar" :style="{ width: progress + '%' }"></div>
</div>

<main class="py-16 md:py-20">
  <div class="max-w-7xl mx-auto px-6">
    <div class="lg:grid lg:grid-cols-[1fr_240px] lg:gap-12">
      <!-- Main Content -->
      <article class="min-w-0">
        <!-- Post Header -->
        <header class="post-header">
          <!-- Back link -->
          <a href="/blog/" class="post-back-link">
            {% lucide_icon "arrow-left" class="icon-sm" %}
            Blog
          </a>

          <div class="post-meta">
            <time datetime="{{ page.date | date: '%Y-%m-%d' }}">
              {{ page.date | date: "%B %d, %Y" }}
            </time>
            <span class="post-meta-sep"></span>
            <span>{% include content/read-time.html content=content %}</span>
          </div>

          <h1 class="post-title">{{ page.title }}</h1>

          {% if page.tagline %}
          <p class="post-tagline">{{ page.tagline }}</p>
          {% endif %}

          {% if page.tags and page.tags.size > 0 %}
          {% assign sorted_tags = page.tags | sort %}
          <div class="post-tags">
            {% for tag in sorted_tags %}
            <span class="tag">{{ tag }}</span>
            {% endfor %}
          </div>
          {% endif %}
        </header>

        <!-- Post Content -->
        <div class="prose post-content">
          {{ content }}
        </div>

        <!-- Post Footer -->
        <footer class="post-footer">
          <!-- Author + Share Row -->
          <div class="post-footer-card">
            {% if page.author %}
            {% assign author = site.people | where: "name", page.author | first %}
            <div class="post-author">
              {% if author %}
              <img src="/assets/images/avatars/{{ author.name | slugify }}.jpg" alt="{{ author.name }}" class="post-author-avatar" loading="lazy">
              <div class="post-author-info">
                <p class="post-author-name">{{ author.name }}</p>
                <p class="post-author-role">{{ author.role }}</p>
                <div class="post-author-links">
                  {% if author.twitter %}
                  <a href="https://x.com/{{ author.twitter }}" class="icon-link-sm" aria-label="Follow on X" target="_blank" rel="noopener">
                    {% include icons/twitter.html size="sm" %}
                  </a>
                  {% endif %}
                  {% if author.bluesky %}
                  <a href="https://bsky.app/profile/{{ author.bluesky }}" class="icon-link-sm" aria-label="Follow on Bluesky" target="_blank" rel="noopener">
                    {% include icons/bluesky.html size="sm" %}
                  </a>
                  {% endif %}
                  {% if author.github %}
                  <a href="https://github.com/{{ author.github }}" class="icon-link-sm" aria-label="GitHub profile" target="_blank" rel="noopener">
                    {% include icons/github.html size="sm" %}
                  </a>
                  {% endif %}
                  {% if author.linkedin %}
                  <a href="https://linkedin.com/in/{{ author.linkedin }}" class="icon-link-sm" aria-label="LinkedIn profile" target="_blank" rel="noopener">
                    {% include icons/linkedin.html size="sm" %}
                  </a>
                  {% endif %}
                </div>
              </div>
              {% else %}
              <div class="post-author-info">
                <p class="post-author-name">{{ page.author }}</p>
                {% if page.author_title %}
                <p class="post-author-role">{{ page.author_title }}</p>
                {% endif %}
              </div>
              {% endif %}
            </div>
            {% endif %}

            <!-- Share Buttons -->
            <div class="post-share">
              <span class="post-share-label">Share</span>
              <div class="post-share-buttons">
                <a href="https://x.com/intent/tweet?url={{ page.url | absolute_url | url_encode }}&text={{ page.title | url_encode }}"
                   class="share-btn share-btn-twitter"
                   target="_blank"
                   rel="noopener"
                   aria-label="Share on X">
                  {% include icons/twitter.html size="sm" %}
                </a>
                <a href="https://bsky.app/intent/compose?text={{ page.title | url_encode }}%20{{ page.url | absolute_url | url_encode }}"
                   class="share-btn share-btn-bluesky"
                   target="_blank"
                   rel="noopener"
                   aria-label="Share on Bluesky">
                  {% include icons/bluesky.html size="sm" %}
                </a>
                <a href="https://www.linkedin.com/sharing/share-offsite/?url={{ page.url | absolute_url | url_encode }}"
                   class="share-btn share-btn-linkedin"
                   target="_blank"
                   rel="noopener"
                   aria-label="Share on LinkedIn">
                  {% include icons/linkedin.html size="sm" %}
                </a>
              </div>
            </div>
          </div>

          <!-- Post Navigation -->
          <nav class="post-nav">
            {% if page.previous.url %}
            <a href="{{ page.previous.url }}" class="post-nav-link post-nav-prev group">
              <span class="post-nav-label">
                {% lucide_icon "arrow-left" class="icon-xs" %}
                Previous
              </span>
              <p class="post-nav-title group-hover:text-cyan transition-colors">{{ page.previous.title }}</p>
            </a>
            {% else %}
            <div></div>
            {% endif %}
            {% if page.next.url %}
            <a href="{{ page.next.url }}" class="post-nav-link post-nav-next group">
              <span class="post-nav-label">
                Next
                {% lucide_icon "arrow-right" class="icon-xs" %}
              </span>
              <p class="post-nav-title group-hover:text-cyan transition-colors">{{ page.next.title }}</p>
            </a>
            {% endif %}
          </nav>
        </footer>
      </article>

      <!-- TOC Sidebar (desktop only) -->
      <aside class="hidden lg:block">
        {% include components/toc.html %}
      </aside>
    </div>
  </div>
</main>

{% include footer.html %}
