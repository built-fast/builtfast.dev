<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  {% include head.html %}
</head>
<body class="min-h-screen">
  <!-- Skip to main content link for keyboard users -->
  <a href="#main-content" class="skip-link">Skip to main content</a>

  <!-- Theme: prevent flash of wrong theme -->
  <script>
    (function() {
      const saved = localStorage.getItem('theme');
      if (saved === 'light') document.documentElement.classList.add('light');
    })();
  </script>

  {{ content }}

{%- assign asset_hash = site.time | date: "%s" -%}
  <!-- Terminal prompt effect -->
  <script src="/assets/js/terminal-prompt.js?v={{ asset_hash }}"></script>

  <!-- Hero scramble effect -->
  <script src="/assets/js/hero-scramble.js?v={{ asset_hash }}"></script>

  <!-- Command palette -->
  <script src="/assets/js/command-palette.js?v={{ asset_hash }}"></script>

  <!-- Alpine.js -->
  <script defer src="/vendor/js/alpine.min.js?v={{ asset_hash }}"></script>

  <!-- Theme toggle store -->
  <script>
    document.addEventListener('alpine:init', () => {
      Alpine.store('theme', {
        value: localStorage.getItem('theme') === 'light' ? 'light' : 'dark',

        init() {
          this.apply();
        },

        set(mode) {
          this.value = mode;
          localStorage.setItem('theme', mode);
          this.apply();
        },

        apply() {
          document.documentElement.classList.toggle('light', this.value === 'light');
        }
      });
    });
  </script>

  <!-- Command palette components -->
  <div x-data>
    {% include components/command-palette.html %}
    {% include components/keyboard-shortcuts.html %}
  </div>
</body>
</html>
