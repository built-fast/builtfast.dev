<aside class="sidebar">
    <div class="sidebar-sticky">
        <!-- Search -->
        <div class="sidebar-search">
            <svg class="sidebar-search-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
            </svg>
            <input type="text" class="sidebar-search-input" id="sidebar-search" placeholder="Search endpoints..." autocomplete="off">
        </div>

        <!-- Endpoints Navigation -->
        <div class="sidebar-section">
            <div class="sidebar-section-title">Endpoints</div>
            <nav class="sidebar-nav" id="toc">
                <a href="#introduction" class="sidebar-item">Introduction</a>
                {% assign endpoint_files = site.data.vector_pro_endpoints | ordered_data: "vector_pro_endpoints" %}
                {% for file in endpoint_files %}
                    {% assign group = file[1] %}
                    {% if group.name %}
                    {% assign group_slug = group.name | slugify %}

                    <div class="sidebar-group" data-group="{{ group_slug }}">
                        <div class="sidebar-group-header">
                            <button type="button" class="sidebar-group-toggle" onclick="toggleSidebarGroup(this.closest('.sidebar-group'))">
                                <svg class="sidebar-group-chevron" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                                </svg>
                            </button>
                            <a href="#{{ group_slug }}" class="sidebar-group-link">{{ group.name }}</a>
                        </div>

                        {% if group.endpoints.size > 0 %}
                            <div class="sidebar-group-items">
                                {% assign current_subgroup = "" %}
                                {% for endpoint in group.endpoints %}
                                    {% assign method = endpoint.httpMethods[0] | downcase %}
                                    {% assign endpoint_slug = group_slug | append: "-" | append: method | append: endpoint.uri | slugify %}
                                    {% assign subgroup = endpoint.metadata.subgroup %}

                                    {% if subgroup != "" and subgroup != current_subgroup %}
                                        {% assign current_subgroup = subgroup %}
                                        {% assign subgroup_slug = group_slug | append: "-" | append: subgroup | slugify %}
                                        <a href="#{{ subgroup_slug }}" class="sidebar-subgroup-label">{{ subgroup }}</a>
                                    {% endif %}

                                    <a href="#{{ endpoint_slug }}" class="sidebar-item{% if subgroup != '' %} sidebar-item-nested{% endif %}" data-unique="{{ endpoint_slug }}">
                                        <span class="sidebar-method sidebar-method-{{ method }}">{{ method | upcase }}</span>
                                        <span>{{ endpoint.metadata.title }}</span>
                                    </a>
                                {% endfor %}
                            </div>
                        {% endif %}
                    </div>
                    {% endif %}
                {% endfor %}
            </nav>
        </div>

        <!-- Resources -->
        <div class="sidebar-resources">
            <div class="sidebar-section-title">Resources</div>
            <a href="/vector-pro/api/collection.json" class="sidebar-resource-link">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"/>
                </svg>
                Postman Collection
            </a>
            <a href="/vector-pro/api/openapi.yaml" class="sidebar-resource-link">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                </svg>
                OpenAPI Spec
            </a>
            <a href="/vector-pro/" class="sidebar-resource-link">
                <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/>
                </svg>
                Documentation
            </a>
        </div>
    </div>
</aside>
